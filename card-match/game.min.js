"use strict";!function(){var t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],i=["C","D","H","S"],n=t.length,l=i.length,d=new function(){var r=this;this.cardsOnBoard=[],this.cardElements=[],this.foundPairs=[],this.flippedCards=[],this.flippedCardIds=[],this.flippedCardElements=[],this.allowClick=!0,this.shuffleCards=function(){for(var d=r.cardElements.length-1;0<d;d--){var e=Math.floor(Math.random()*(d+1)),a=[r.cardElements[e],r.cardElements[d]];r.cardElements[d]=a[0],r.cardElements[e]=a[1]}},this.addActivePair=function(){r.flippedCardElements.forEach(function(d){d.classList.add("paired"),d.removeEventListener("click",r.flipCard)}),r.foundPairs.push(d.flippedCards[0]),r.resetFlippedCards(),r.foundPairs.length===r.cardsOnBoard.length&&r.endGame()},this.flipMissmatchedCards=function(){r.flippedCardElements.forEach(function(d){d.classList.remove("flipped")}),r.resetFlippedCards()},this.judgePair=function(){r.flippedCards[0]===r.flippedCards[1]?r.addActivePair():r.flipMissmatchedCards(),r.allowClick=!0},this.flipCard=function(d){var e=d.path.find(function(d){return d.classList.contains("card")}),a=e.id.split("-")[0];r.allowClick&&e.id!==r.flippedCardIds[0]&&(e.classList.add("flipped"),r.flippedCards.push(a),r.flippedCardIds.push(e.id),r.flippedCardElements.push(e),2==r.flippedCards.length&&(r.allowClick=!1,setTimeout(r.judgePair,500)))},this.createCards=function(d){var e=document.getElementById("game-board");e.innerHTML="",d.forEach(function(d){for(var e=0;e<2;e++){var a=document.createElement("div"),s=document.createElement("div"),t=document.createElement("img"),i=document.createElement("img");a.id="".concat(d,"-").concat(e),a.classList.add("card"),a.addEventListener("click",r.flipCard),s.classList.add("card-inner"),t.src="./assets/cards/blue_back.png",t.classList.add("front"),i.src="./assets/cards/".concat(d,".png"),i.classList.add("back"),s.appendChild(t),s.appendChild(i),a.appendChild(s),r.cardElements.push(a)}}),r.shuffleCards(),r.cardElements.forEach(function(d){return e.appendChild(d)})},this.buildBoard=function(d){d=Math.min(d,20);for(var e=0;e<d;e++)for(var a=!1,s=void 0;!a;)s=t[Math.floor(Math.random()*n)]+i[Math.floor(Math.random()*l)],(a=!r.cardsOnBoard.includes(s))&&r.cardsOnBoard.push(s);r.createCards(r.cardsOnBoard)},this.endGame=function(){document.getElementById("win-msg").style.display="block",setTimeout(r.resetBoard,3e3)},this.resetFlippedCards=function(){r.flippedCards=[],r.flippedCardIds=[],r.flippedCardElements=[]},this.resetBoard=function(){r.cardsOnBoard=[],r.cardElements=[],r.foundPairs=[],r.resetFlippedCards(),document.getElementById("win-msg").style.display="none",r.buildBoard(9)}};d.buildBoard(9)}();